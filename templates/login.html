<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - SecuredDoc</title>
    
    <!-- External Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="https://apis.google.com/js/gsi/client" async defer></script>
    <script src="https://unpkg.com/@stacks/connect@latest/dist/index.js"></script>
    <script src="https://unpkg.com/@stacks/transactions@latest/dist/index.umd.js"></script>
    <script src="https://unpkg.com/@stacks/network@latest/dist/index.umd.js"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .wallet-card {
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        .wallet-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
        .wallet-button {
            transition: all 0.3s ease;
        }
        .wallet-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        .connection-status {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 400px;
        }
        .feature-highlight {
            background: linear-gradient(45deg, #4f46e5, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Navigation -->
    <nav class="gradient-bg shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="/" class="flex items-center">
                        <i class="fas fa-shield-alt text-white text-2xl mr-3"></i>
                        <h1 class="text-white text-xl font-bold">SecuredDoc</h1>
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/" class="text-white hover:text-blue-200 transition duration-200">
                        <i class="fas fa-home mr-1"></i>Home
                    </a>
                    <a href="/dashboard" class="text-white hover:text-blue-200 transition duration-200">
                        <i class="fas fa-chart-bar mr-1"></i>Dashboard
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl w-full space-y-8">
            <!-- Header -->
            <div class="text-center">
                <h2 class="text-4xl font-bold text-gray-900">
                    Connect to <span class="feature-highlight">SecuredDoc</span>
                </h2>
                <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">
                    Secure your documents with blockchain-powered verification. 
                    Connect your wallet to get started with advanced fraud detection and PII protection.
                </p>
            </div>

            <!-- Authentication Methods -->
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Wallet Connection Section -->
                <div class="wallet-card bg-white rounded-xl shadow-lg p-8">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-wallet text-2xl text-purple-600"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900">Connect Wallet</h3>
                        <p class="text-gray-600 mt-2">Connect your blockchain wallet for secure transactions</p>
                    </div>

                    <!-- Wallet Options -->
                    <div class="space-y-4">
                        <!-- Leather Wallet (Stacks) -->
                        <button id="connectLeather" class="wallet-button w-full bg-orange-600 text-white px-6 py-4 rounded-lg hover:bg-orange-700 transition duration-200 flex items-center justify-center">
                            <i class="fas fa-coins mr-3 text-xl"></i>
                            <div class="text-left">
                                <div class="font-semibold">Leather Wallet</div>
                                <div class="text-sm opacity-90">Stacks Network</div>
                            </div>
                        </button>

                        <!-- MetaMask -->
                        <button id="connectMetaMask" class="wallet-button w-full bg-orange-500 text-white px-6 py-4 rounded-lg hover:bg-orange-600 transition duration-200 flex items-center justify-center">
                            <i class="fab fa-ethereum mr-3 text-xl"></i>
                            <div class="text-left">
                                <div class="font-semibold">MetaMask</div>
                                <div class="text-sm opacity-90">Ethereum Network</div>
                            </div>
                        </button>

                        <!-- Demo Mode -->
                        <button id="demoMode" class="wallet-button w-full bg-gray-600 text-white px-6 py-4 rounded-lg hover:bg-gray-700 transition duration-200 flex items-center justify-center">
                            <i class="fas fa-play mr-3 text-xl"></i>
                            <div class="text-left">
                                <div class="font-semibold">Demo Mode</div>
                                <div class="text-sm opacity-90">Try without wallet</div>
                            </div>
                        </button>
                    </div>

                    <!-- Connection Status -->
                    <div id="walletStatus" class="mt-6 p-4 bg-gray-50 rounded-lg hidden">
                        <div class="flex items-center">
                            <i class="fas fa-check-circle text-green-600 mr-2"></i>
                            <div>
                                <div class="font-medium text-gray-900">Wallet Connected</div>
                                <div id="connectedWalletInfo" class="text-sm text-gray-600"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Traditional Authentication Section -->
                <div class="wallet-card bg-white rounded-xl shadow-lg p-8">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-user-shield text-2xl text-blue-600"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900">Traditional Login</h3>
                        <p class="text-gray-600 mt-2">Use standard authentication methods</p>
                    </div>

                    <!-- Google Sign-In -->
                    <div class="space-y-4">
                        <div id="g_id_onload"
                             data-client_id="YOUR_GOOGLE_CLIENT_ID"
                             data-callback="handleGoogleSignIn">
                        </div>
                        <button id="googleSignInBtn" class="wallet-button w-full bg-red-600 text-white px-6 py-4 rounded-lg hover:bg-red-700 transition duration-200 flex items-center justify-center">
                            <i class="fab fa-google mr-3 text-xl"></i>
                            <div class="text-left">
                                <div class="font-semibold">Sign in with Google</div>
                                <div class="text-sm opacity-90">Quick and secure</div>
                            </div>
                        </button>

                        <!-- Guest Access -->
                        <button id="guestAccess" class="wallet-button w-full bg-gray-500 text-white px-6 py-4 rounded-lg hover:bg-gray-600 transition duration-200 flex items-center justify-center">
                            <i class="fas fa-user-circle mr-3 text-xl"></i>
                            <div class="text-left">
                                <div class="font-semibold">Guest Access</div>
                                <div class="text-sm opacity-90">Continue without account</div>
                            </div>
                        </button>
                    </div>

                    <!-- Auth Status -->
                    <div id="authStatus" class="mt-6 p-4 bg-gray-50 rounded-lg hidden">
                        <div class="flex items-center">
                            <i class="fas fa-check-circle text-green-600 mr-2"></i>
                            <div>
                                <div class="font-medium text-gray-900">Authentication Successful</div>
                                <div id="authUserInfo" class="text-sm text-gray-600"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Service Fees Information -->
            <div id="serviceFeesSection" class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-bold text-gray-900 mb-6 text-center">
                    <i class="fas fa-coins mr-2 text-yellow-600"></i>Service Fees
                </h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-center p-4 bg-blue-50 rounded-lg">
                        <div class="text-2xl font-bold text-blue-600" id="registrationFee">1.0 STX</div>
                        <div class="text-sm text-gray-600">Registration</div>
                    </div>
                    <div class="text-center p-4 bg-green-50 rounded-lg">
                        <div class="text-2xl font-bold text-green-600" id="verificationFee">0.5 STX</div>
                        <div class="text-sm text-gray-600">Verification</div>
                    </div>
                    <div class="text-center p-4 bg-purple-50 rounded-lg">
                        <div class="text-2xl font-bold text-purple-600" id="accessFee">0.25 STX</div>
                        <div class="text-sm text-gray-600">Access Grant</div>
                    </div>
                    <div class="text-center p-4 bg-red-50 rounded-lg">
                        <div class="text-2xl font-bold text-red-600" id="storageFee">2.0 STX</div>
                        <div class="text-sm text-gray-600">Premium Storage</div>
                    </div>
                </div>
            </div>

            <!-- Features Preview -->
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-bold text-gray-900 mb-6 text-center">
                    What You Get Access To
                </h3>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="text-center">
                        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-shield-virus text-blue-600"></i>
                        </div>
                        <h4 class="font-semibold text-gray-900 mb-2">AI Fraud Detection</h4>
                        <p class="text-sm text-gray-600">Advanced fraud analysis with 95%+ accuracy</p>
                    </div>
                    <div class="text-center">
                        <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-user-secret text-green-600"></i>
                        </div>
                        <h4 class="font-semibold text-gray-900 mb-2">PII Protection</h4>
                        <p class="text-sm text-gray-600">Automatic detection and anonymization</p>
                    </div>
                    <div class="text-center">
                        <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-cube text-purple-600"></i>
                        </div>
                        <h4 class="font-semibold text-gray-900 mb-2">Blockchain Audit</h4>
                        <p class="text-sm text-gray-600">Immutable verification on Stacks</p>
                    </div>
                </div>
            </div>

            <!-- Continue Button -->
            <div class="text-center">
                <button id="continueBtn" class="bg-blue-600 text-white px-8 py-4 rounded-lg hover:bg-blue-700 transition duration-200 font-semibold disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                    <i class="fas fa-arrow-right mr-2"></i>Continue to Dashboard
                </button>
                <p class="text-sm text-gray-500 mt-2">You can always connect your wallet later</p>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <!-- Connection Status Modal -->
    <div id="connectionModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center h-full p-4">
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
                <div class="text-center">
                    <div id="connectionIcon" class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-spinner fa-spin text-2xl text-blue-600"></i>
                    </div>
                    <h3 id="connectionTitle" class="text-xl font-bold text-gray-900 mb-2">Connecting...</h3>
                    <p id="connectionMessage" class="text-gray-600 mb-6">Please confirm the connection in your wallet</p>
                    <button id="closeConnectionModal" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition duration-200">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        const authState = {
            user: null,
            wallet: null,
            authenticated: false
        };

        // Configuration
        const CONFIG = {
            GOOGLE_CLIENT_ID: "YOUR_GOOGLE_CLIENT_ID", // Replace with actual client ID
            STACKS_NETWORK: "testnet",
            API_BASE_URL: window.location.origin
        };

        // Utility Functions
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification px-4 py-3 rounded-md text-white mb-2 ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                type === 'warning' ? 'bg-yellow-500' : 'bg-blue-500'
            }`;
            notification.innerHTML = `
                <div class="flex items-center justify-between">
                    <span><i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation' : 'info'} mr-2"></i>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            document.getElementById('notificationContainer').appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        function showConnectionModal(title, message, icon = 'spinner') {
            document.getElementById('connectionTitle').textContent = title;
            document.getElementById('connectionMessage').textContent = message;
            document.getElementById('connectionIcon').innerHTML = `
                <i class="fas fa-${icon} ${icon === 'spinner' ? 'fa-spin' : ''} text-2xl text-blue-600"></i>
            `;
            document.getElementById('connectionModal').classList.remove('hidden');
        }

        function hideConnectionModal() {
            document.getElementById('connectionModal').classList.add('hidden');
        }

        function updateUI() {
            const walletStatus = document.getElementById('walletStatus');
            const authStatus = document.getElementById('authStatus');
            const continueBtn = document.getElementById('continueBtn');
            
            // Update wallet status
            if (authState.wallet) {
                walletStatus.classList.remove('hidden');
                document.getElementById('connectedWalletInfo').textContent = 
                    `${authState.wallet.type.toUpperCase()}: ${authState.wallet.address.substring(0, 8)}...${authState.wallet.address.substring(authState.wallet.address.length - 6)}`;
            }

            // Update auth status
            if (authState.user) {
                authStatus.classList.remove('hidden');
                document.getElementById('authUserInfo').textContent = 
                    `Signed in as ${authState.user.name || authState.user.email || 'User'}`;
            }

            // Enable continue button if authenticated or wallet connected
            continueBtn.disabled = !(authState.wallet || authState.user || authState.authenticated);
        }

        // Wallet Connection Functions
        async function connectLeatherWallet() {
            try {
                showConnectionModal('Connecting to Leather', 'Please confirm the connection in your Leather wallet');
                
                // Check for Stacks Connect (from the injected script)
                if (typeof showConnect !== 'undefined') {
                    const authOptions = {
                        onFinish: async (authData) => {
                            try {
                                // Send authentication data to backend
                                const response = await fetch('/api/auth/stacks', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                    },
                                    body: JSON.stringify({
                                        authData: authData,
                                        userSession: authData.userSession ? {
                                            userData: authData.userSession.loadUserData()
                                        } : null
                                    })
                                });
                                
                                const result = await response.json();
                                
                                if (result.success) {
                                    authState.wallet = result.wallet;
                                    authState.user = result.user;
                                    authState.authenticated = true;
                                    
                                    hideConnectionModal();
                                    showNotification('Leather wallet connected successfully!', 'success');
                                    updateUI();
                                } else {
                                    throw new Error(result.error || 'Authentication failed');
                                }
                            } catch (error) {
                                console.error('Backend authentication error:', error);
                                hideConnectionModal();
                                showNotification('Authentication failed: ' + error.message, 'error');
                                // Fallback to demo mode
                                simulateWalletConnection('leather', 'ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM');
                            }
                        },
                        onCancel: () => {
                            hideConnectionModal();
                            showNotification('Wallet connection cancelled', 'warning');
                        },
                        appDetails: {
                            name: 'SecuredDoc',
                            icon: window.location.origin + '/favicon.ico',
                        },
                    };

                    showConnect(authOptions);
                } else {
                    // Alternative method for direct Leather wallet connection
                    if (window.LeatherProvider) {
                        try {
                            const response = await window.LeatherProvider.request('stacks_getAddresses');
                            if (response && response.addresses && response.addresses.length > 0) {
                                const address = response.addresses[0].address;
                                
                                // Send wallet connection to backend
                                const backendResponse = await fetch('/api/wallet/connect', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                    },
                                    body: JSON.stringify({
                                        wallet_type: 'leather',
                                        wallet_address: address,
                                        network: 'testnet'
                                    })
                                });
                                
                                const result = await backendResponse.json();
                                
                                if (result.success) {
                                    authState.wallet = {
                                        type: 'leather',
                                        address: address,
                                        network: result.network
                                    };
                                    authState.authenticated = true;
                                    
                                    hideConnectionModal();
                                    showNotification('Leather wallet connected successfully!', 'success');
                                    updateUI();
                                } else {
                                    throw new Error(result.error);
                                }
                            }
                        } catch (error) {
                            throw error;
                        }
                    } else {
                        // For demo, simulate connection after delay
                        setTimeout(async () => {
                            const response = await fetch('/api/wallet/connect', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({
                                    wallet_type: 'leather',
                                    wallet_address: 'ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM',
                                    network: 'testnet'
                                })
                            });
                            
                            simulateWalletConnection('leather', 'ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM');
                            hideConnectionModal();
                        }, 2000);
                    }
                }
            } catch (error) {
                console.error('Leather wallet error:', error);
                hideConnectionModal();
                showNotification('Failed to connect Leather wallet. Using demo mode.', 'warning');
                
                // Fallback to demo connection
                try {
                    const response = await fetch('/api/wallet/connect', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            wallet_type: 'leather',
                            wallet_address: 'ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM',
                            network: 'testnet'
                        })
                    });
                    simulateWalletConnection('leather', 'ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM');
                } catch (backendError) {
                    console.error('Backend connection failed:', backendError);
                    simulateWalletConnection('leather', 'ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM');
                }
            }
        }

        async function connectMetaMask() {
            try {
                showConnectionModal('Connecting to MetaMask', 'Please confirm the connection in your MetaMask wallet');
                
                if (typeof window.ethereum !== 'undefined') {
                    const accounts = await window.ethereum.request({
                        method: 'eth_requestAccounts'
                    });
                    
                    authState.wallet = {
                        type: 'metamask',
                        address: accounts[0],
                        network: 'ethereum'
                    };

                    hideConnectionModal();
                    showNotification('MetaMask connected successfully!', 'success');
                    updateUI();
                } else {
                    throw new Error('MetaMask not found');
                }
            } catch (error) {
                console.error('MetaMask error:', error);
                hideConnectionModal();
                showNotification('Failed to connect MetaMask. Using demo mode.', 'warning');
                simulateWalletConnection('metamask', '0x742d35Cc6635C0532925a3b8D45C27F0e4b7b6c9');
            }
        }

        function simulateWalletConnection(type, address) {
            authState.wallet = {
                type: type,
                address: address,
                network: type === 'leather' ? 'testnet' : 'ethereum'
            };
            
            showNotification(`${type.charAt(0).toUpperCase() + type.slice(1)} wallet connected! (Demo Mode)`, 'success');
            updateUI();
        }

        function enableDemoMode() {
            authState.authenticated = true;
            authState.user = {
                name: 'Demo User',
                email: 'demo@secureddoc.com',
                type: 'demo'
            };
            
            showNotification('Demo mode enabled! Full functionality available.', 'success');
            updateUI();
        }

        function enableGuestAccess() {
            authState.authenticated = true;
            authState.user = {
                name: 'Guest User',
                email: 'guest@secureddoc.com',
                type: 'guest'
            };
            
            showNotification('Guest access enabled! Limited functionality available.', 'info');
            updateUI();
        }

        // Google Sign-In Handler
        function handleGoogleSignIn(response) {
            try {
                // Parse JWT token
                const responsePayload = JSON.parse(atob(response.credential.split('.')[1]));
                
                authState.user = {
                    name: responsePayload.name,
                    email: responsePayload.email,
                    picture: responsePayload.picture,
                    type: 'google'
                };
                
                authState.authenticated = true;
                
                showNotification('Google sign-in successful!', 'success');
                updateUI();
            } catch (error) {
                console.error('Google sign-in error:', error);
                showNotification('Google sign-in failed', 'error');
            }
        }

        function continueToDashboard() {
            if (authState.wallet || authState.user || authState.authenticated) {
                // Store auth state in session storage
                sessionStorage.setItem('authState', JSON.stringify(authState));
                
                // Redirect to dashboard
                window.location.href = '/dashboard';
            } else {
                showNotification('Please connect a wallet or sign in first', 'warning');
            }
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Load previous auth state if available
            const savedAuthState = sessionStorage.getItem('authState');
            if (savedAuthState) {
                Object.assign(authState, JSON.parse(savedAuthState));
                updateUI();
            }

            // Bind wallet connection events
            document.getElementById('connectLeather').addEventListener('click', connectLeatherWallet);
            document.getElementById('connectMetaMask').addEventListener('click', connectMetaMask);
            document.getElementById('demoMode').addEventListener('click', enableDemoMode);
            document.getElementById('guestAccess').addEventListener('click', enableGuestAccess);
            document.getElementById('continueBtn').addEventListener('click', continueToDashboard);
            
            // Modal controls
            document.getElementById('closeConnectionModal').addEventListener('click', hideConnectionModal);
            
            // Close modal on outside click
            document.getElementById('connectionModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideConnectionModal();
                }
            });

            // Load service fees
            loadServiceFees();
        });

        // Load service fees from API
        async function loadServiceFees() {
            try {
                const response = await fetch('/api/fees');
                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.fees) {
                        document.getElementById('registrationFee').textContent = data.fees.registration?.display || '1.0 STX';
                        document.getElementById('verificationFee').textContent = data.fees.verification?.display || '0.5 STX';
                        document.getElementById('accessFee').textContent = data.fees.access?.display || '0.25 STX';
                        document.getElementById('storageFee').textContent = data.fees.premium_storage?.display || '2.0 STX';
                    }
                }
            } catch (error) {
                console.error('Failed to load service fees:', error);
                // Keep default values displayed
            }
        }

        // Initialize Google Sign-In when page loads
        window.onload = function() {
            if (typeof google !== 'undefined') {
                google.accounts.id.initialize({
                    client_id: CONFIG.GOOGLE_CLIENT_ID,
                    callback: handleGoogleSignIn
                });
                
                // Render the Google Sign-In button
                google.accounts.id.renderButton(
                    document.getElementById("googleSignInBtn"),
                    {
                        theme: "outline",
                        size: "large",
                        text: "signin_with",
                        shape: "rectangular"
                    }
                );
            }
        };
    </script>
</body>
</html>
